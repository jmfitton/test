<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shift Checklist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
        color: #333;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      h1 {
        font-size: 24px;
        color: #2c3e50;
        margin-bottom: 20px;
        text-align: center;
      }
      h2 {
        font-size: 18px;
        color: #34495e;
        margin-bottom: 15px;
        text-align: center;
      }
      .form-field {
        margin-bottom: 15px;
      }
      .form-field label {
        display: block;
        font-size: 16px;
        font-weight: 500;
        color: #7f8c8d;
        margin-bottom: 5px;
      }
      .checklist-section {
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #ecf0f1;
      }
      .checklist-item {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #ecf0f1;
      }
      .checklist-item:last-child {
        border-bottom: none;
      }
      .check-input {
        margin-right: 10px;
        width: 20px;
        height: 20px;
      }
      .item-text {
        flex-grow: 1;
        font-size: 16px;
        color: #2c3e50;
      }
      .comment-input {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border-radius: 5px;
        border: 1px solid #bdc3c7;
        font-size: 14px;
      }
    </style>
</head>
<body class="bg-gray-100"> <div class="mx-auto max-w-2xl bg-white rounded-lg shadow-md mt-8 mb-8 p-4"> <div class="title-container">
            <h1 class="main-title">Machine Utility</h1>
            <h2 class="sub-title">Shift Checklist & Operator Basic Care</h2>
        </div>

        <div class="form-field">
            <label for="date">Date:</label>
            <input type="date" id="date">
        </div>
        <div class="form-field">
            <label for="utilityName">Utility Name:</label>
            <input type="text" id="utilityName" placeholder="Enter utility name">
        </div>

        <div id="checklist-container">
        </div>
        <div class="actions">
            <button id="email-button" class="email-button">Email</button>
            <button id="reset-button" class="reset-button">Reset</button>
        </div>
    </div>
    <script>
        const checklistItems = [
            {
                title: "Dry End / White Water Pumps",
                items: [
                    "Dry End Broke Pump (basement hallway) 722214",
                    "White Water to Save All Pump (basement b/w Couch Pit & Wire Pit) 722101",
                    "White Water to Showers Pump (basement b/w Couch pit & Wire Pit) 722102",
                    "Seal Pit to Wire Pit Pump (basement b/w Couch Pit & Wire Pit) 722103",
                    "#1 Couch Pit Broke Pump (basement b/w Couch pit & Wire Pit) 722104",
                    "#2 Couch Pit Broke Pump (basement b/w Couch pit & Wire Pit) 722105",
                ]
            },
            {
                title: "Other Basement Pumps",
                items: [
                    "Fan Pump (basement across from Visco Tanker) 712121",
                    "New Machine Chest Pump (basement entrance of mill) 712163",
                    "Secondary Cleaner Supply Pump (basement diagonal from tunnel) 712114",
                    "Tertiary Cleaner Supply Pump (basement behind Secondary) 712115",
                    "Quaternary Cleaner Supply Pump (basement behind Tertiary) 712117",
                    "Thickened Stock Chest Pump (basement) 712152",
                    "White Water to Dilution Pump (basement) 712118",
                    "White Water Dilution to Kraft Pump (basement) 712165",
                    "Screen Supply Pump (Kraft Pump) (basement) 712164",
                    "Primary Cleaner Pump (basement behind Visco Tanker) 712180",
                    "Clear White Water to Sydrapulper Pump (basement by Door #36) 712154",
                ]
            },
            {
                title: "HD Tower Pumps",
                items: [
                    "#1 HD Tower Pump (chem prep) 712161",
                    "#3 HD Tower Pump (chem prep) 712167",
                ]
            },
            {
                title: "Shower Booster Pumps",
                items: [
                    "Shower Booster Pump (basement line shaft) 722133",
                    "Top Felt Shower Booster Pump (basement - line shaft) 722134",
                    "Slusher Shower Booster Pump (Operating floor below Stock Prep Mezzanine) 712160",
                ]
            },
            {
                title: "Cleaner Reject Lines",
                items: [
                    "Tertiary Cleaner Reject Line Flowing 715613",
                    "Quaternary Cleaner Reject Line Flowing 715614",
                    "RCC Reject Line Flowing 715615",
                    "Rejects being dumped after what Cleaner",
                ]
            },
            {
                title: "Consumables Management",
                items: [
                    "Consumables Management - Discard used pallets & strapping",
                    "Consumables Management - Bring in wrappers & wire",
                    "Consumables Management - Empty bins",
                ]
            },
            {
                title: "Floor Cleanup",
                items: [
                    "Floor Below Conveyor - Wash Up",
                    "Broke Pit Repulping - Pit & Conveyor clear of broke",
                    "Frontside Cleanup - Pickup tramp material",
                    "Frontside Cleanup - Empty garbage",
                    "Frontside Cleanup - Sweep & hose floors",
                    "Backside Cleanup - Pickup tramp material",
                    "Backside Cleanup - Empty garbage barrels",
                    "Backside Cleanup - Sweep & hose floors",
                ]
            },
            {
                title: "Layboy Cleanup",
                items: [
                    "Layboy Cleanup - Sweep blow from tray back",
                    "Layboy Cleanup - Pull out sheets",
                ]
            },
            {
                title: "Scanner Supply Filter",
                items: [
                    "Scanner Supply Filter - Check each Tour - Change as necessary (note date on new filters) Stores # 401615006537",
                ]
            },
            {
                title: "BALE LINE",
                items: [
                    "BALE LINE - Cleanup and sweep floor areas",
                ]
            },
            {
                title: "FLAKT DRYER AREA",
                items: [
                    "FLAKT DRYER AREA - Exhaust Screen Clean screen located on north wall in basement under Flakt",
                    "FLAKT DRYER AREA - Supply Intake Screen Clean screen located on north wall on upper level of Flakt Dryer",
                    "FLAKT DRYER AREA - Sheet Cutter Filter Check each Tour - Change as necessary (note date on monthly shear) Stores # 401615000377",
                    "FLAKT DRYER AREA - Backside Cleanup Pickup tramp material",
                    "FLAKT DRYER AREA - Empty garbage barrels",
                    "FLAKT DRYER AREA - Sweep & hose floors",
                ]
            },
            {
                title: "Flakt Lint Screen Cleaning",
                items: [
                    "Flakt Lint Screen Cleaning - North Bottom",
                    "Flakt Lint Screen Cleaning - North - Top",
                    "Flakt Lint Screen Cleaning - South Bottom",
                    "Flakt Lint Screen Cleaning - South - Top",
                ]
            },
            {
                title: "MACHINE OPERATING FLOOR",
                items: [
                    "MACHINE OPERATING FLOOR - Frontside Cleanup Pickup tramp material",
                    "MACHINE OPERATING FLOOR - Frontside Cleanup Empty garbage barrels",
                    "MACHINE OPERATING FLOOR - Frontside Cleanup Sweep & hose floors",
                    "MACHINE OPERATING FLOOR - Backside Cleanup Pickup tramp material",
                    "MACHINE OPERATING FLOOR - Backside Cleanup Empty garbage barrels",
                    "MACHINE OPERATING FLOOR - Backside Cleanup Sweep & hose floors",
                    "MACHINE OPERATING FLOOR - Wet End Supply Filters Check each Tour Change as necessary (note date on new filters ) Stores # 401615000283",
                ]
            },
            {
                title: "STOCK PREPARATION - ALL AREAS",
                items: [
                    "STOCK PREPARATION - ALL AREAS - Online Primary Screen Clean Junk Trap Note any plugging or abnormal amount of debris",
                    "STOCK PREPARATION - ALL AREAS - Secondary Screen Clean Junk Trap Note any plugging or abnormal amount of debris",
                    "STOCK PREPARATION - ALL AREAS - Thickener Oscillating Shower Bar Filters Check each Tour Change as necessary (note date on new filters) Stores # 401615000561",
                    "STOCK PREPARATION - ALL AREAS - Floor Cleanup Pickup tramp material",
                    "STOCK PREPARATION - ALL AREAS - Floor Cleanup Sweep & hose floors",
                ]
            },
            // Add more sections as needed
        ];

        const checklistContainer = document.getElementById('checklist-container');
        const emailButton = document.getElementById('email-button');
        const resetButton = document.getElementById('reset-button');
        const dateInput = document.getElementById('date');
        const utilityNameInput = document.getElementById('utilityName');

        //  CHANGE THIS EMAIL ADDRESS
        const recipientEmail = "mat.fitton@gmail.com";  // Replace with the desired email address

        function generateChecklist() {
            checklistContainer.innerHTML = ''; // Clear previous checklist
            checklistItems.forEach((section, sectionIndex) => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'checklist-section';

                const sectionTitle = document.createElement('h2');
                sectionTitle.textContent = section.title;
                sectionTitle.style.cssText = 'font-size: 18px; color: #34495e; margin-bottom: 10px; text-align: left;';

                sectionDiv.appendChild(sectionTitle);

                const table = document.createElement('table');
                table.style.cssText = 'width: 100%; border-collapse: collapse;';

                section.items.forEach((item, itemIndex) => {
                    const row = document.createElement('tr');
                    row.style.cssText = 'border-bottom: 1px solid #ecf0f1;';

                    const checkboxCell = document.createElement('td');
                    checkboxCell.style.cssText = 'padding: 8px 0;';

                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.className = 'check-input';
                    checkbox.id = `item-${sectionIndex}-${itemIndex}`;
                    checkbox.style.cssText = 'margin-right: 10px; width: 20px; height: 20px;';

                    const labelCell = document.createElement('td');
                    labelCell.style.cssText = 'padding: 8px 0;';

                    const label = document.createElement('label');
                    label.className = 'item-text';
                    label.textContent = item;
                    label.setAttribute('for', `item-${sectionIndex}-${itemIndex}`);
                    label.style.cssText = 'font-size: 16px; color: #2c3e50;';

                    const commentCell = document.createElement('td');
                    commentCell.style.cssText = 'padding: 8px 0;';
                    const commentInput = document.createElement('textarea');
                    commentInput.className = 'comment-input';
                    commentInput.placeholder = 'Comments...';
                    commentInput.id = `comment-${sectionIndex}-${itemIndex}`;
                    commentInput.style.cssText = 'width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #bdc3c7; font-size: 14px;';

                    checkboxCell.appendChild(checkbox);
                    labelCell.appendChild(label);
                    commentCell.appendChild(commentInput);
                    row.appendChild(checkboxCell);
                    row.appendChild(labelCell);
                    row.appendChild(commentCell);
                    table.appendChild(row);
                });

                sectionDiv.appendChild(table);
                checklistContainer.appendChild(sectionDiv);
            });
            loadSavedChecklist(); // Load saved state after generating
        }

        function sendChecklistByEmail() {
            const checklistData = [];
            checklistItems.forEach((section, sectionIndex) => {
                section.items.forEach((_, itemIndex) => {
                    const checkbox = document.getElementById(`item-${sectionIndex}-${itemIndex}`);
                    const commentInput = document.getElementById(`comment-${sectionIndex}-${itemIndex}`);
                    checklistData.push({
                        checked: checkbox.checked,
                        comment: commentInput.value,
                        section: section.title, // Include section title
                        item: section.items[itemIndex],
                    });
                });
            });
            const date = dateInput.value;
            const utilityName = utilityNameInput.value;

            const subject = "Shift Checklist";

            let emailBody = `
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Shift Checklist</title>
                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
                </head>
                <body style="font-family: 'Inter', sans-serif; color: #333; margin: 0; padding: 0;">
                  <div style="max-width: 800px; margin: 20px auto; padding: 20px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                    <h1 style="font-size: 24px; color: #2c3e50; margin-bottom: 20px; text-align: center;">Machine Utility</h1>
                    <h2 style="font-size: 18px; color: #34495e; margin-bottom: 15px; text-align: center;">Shift Checklist & Operator Basic Care</h2>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 16px; font-weight: 500; color: #7f8c8d; margin-bottom: 5px;">Date:</label>
                        <div style="">${date}</div>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 16px; font-weight: 500; color: #7f8c8d; margin-bottom: 5px;">Utility Name:</label>
                        <div style="">${utilityName}</div>
                    </div>
                    <table style="width: 100%; border-collapse: collapse;">
            `;

          checklistData.forEach(item => {
            emailBody += `
                        <tr style="border-bottom: 1px solid #ecf0f1;">
                            <td style="padding: 10px 0; font-size: 16px; color: #34495e; font-weight: bold;">${item.section}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ecf0f1;">
                            <td style="padding: 10px 0;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <tr style="border-bottom: 1px solid #ecf0f1;">
                                        <td style="padding: 8px 0; width: 20px; height: 20px;">
                                            <input type="checkbox" style="margin-right: 10px; width: 20px; height: 20px;" ${item.checked ? 'checked' : ''}>
                                        </td>
                                        <td style="padding: 8px 0; font-size: 16px; color: #2c3e50;">${item.item}</td>
                                        <td style="padding: 8px 0; font-size: 14px; color: #333;">${item.comment}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                `;
          });

          emailBody += `
                    </table>
                  </div>
                </body>
                </html>
            `;

          const mailtoUrl = `mailto:${recipientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
          window.location.href = mailtoUrl;
          alert('Opening email client...  For best results, view in a desktop email client.');
        }

        function loadSavedChecklist() {
            const savedChecklist = localStorage.getItem('shiftChecklist');
            const savedDate = localStorage.getItem('shiftChecklistDate');
            const savedName = localStorage.getItem('shiftChecklistName');

            if (savedChecklist) {
                const checklistData = JSON.parse(savedChecklist);
                checklistData.forEach((item, index) => {
                    const checkbox = document.getElementById(`item-${item.sectionIndex}-${item.itemIndex}`);
                    const commentInput = document.getElementById(`comment-${item.sectionIndex}-${item.itemIndex}`);
                    if (checkbox) {
                        checkbox.checked = item.checked;
                    }
                    if (commentInput) {
                        commentInput.value = item.comment;
                    }
                });
            }
            if (savedDate) {
                dateInput.value = savedDate;
            }
            if (savedName) {
                utilityNameInput.value = savedName;
            }
        }

        function resetChecklist() {
            checklistItems.forEach((section, sectionIndex) => {
                section.items.forEach((_, itemIndex) => {
                    const checkbox = document.getElementById(`item-${sectionIndex}-${itemIndex}`);
                    const commentInput = document.getElementById(`comment-${sectionIndex}-${itemIndex}`);
                    if (checkbox) {
                        checkbox.checked = false;
                    }
                    if (commentInput) {
                        commentInput.value = '';
                    }
                });
            });
            dateInput.value = '';
            utilityNameInput.value = '';
            localStorage.removeItem('shiftChecklist');
            localStorage.removeItem('shiftChecklistDate');
            localStorage.removeItem('shiftChecklistName');
            alert('Checklist reset!');
        }

        emailButton.addEventListener('click', sendChecklistByEmail);
        resetButton.addEventListener('click', resetChecklist);

        generateChecklist();

    </script>
</body>
</html>
